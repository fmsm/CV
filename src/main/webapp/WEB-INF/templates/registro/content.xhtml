<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
		
	<h:form id="contentForm">
	
	<!-- con ese for parece ser que solo deberia mostrar los mensajes que se le manden con '....addMessage("mensajeGrowl",...' -->	
	<p:growl id="growl" for="mensajeGrowl"/>
		
	<div class="ui-grid ui-grid-responsive">
	
	    <div class="ui-grid-row"> 
	    	    
	        <div class="ui-grid-col-12 txtCenter">					
				<p:graphicImage name="/imagenes/logo.png" styleClass="logoRegistro"/> 	        	
	        </div>
	    
	    </div>    
			
		<div class="ui-grid-row">
		        	        		        		
	        <div class="ui-grid-col-4" style="margin: auto;">
	        									        							
				<p:panel id="registroAluPnl" styleClass="pnlRegistro">
				
					<f:facet name="header">
						<h:outputText value="#{msg['header.createAccAlu']}"/>
					</f:facet>
					
																				
					<div class="ui-grid-row">
 						<p:outputLabel for="email" value="#{msg['msg.emailS']}" styleClass="ui-grid-col-6"/> 
						<p:message for="email" display="text" styleClass="ui-grid-col-6"/>					
					</div>
					
					<div class="ui-grid-row">					
						<p:inputText id="email" value="#{registroAlumno.email}" required="true" requiredMessage="#{msg['error.required']}" validatorMessage="#{msg['error.formato']}" 
									 placeholder="#{msg['placeholder.email']}" styleClass="ui-grid-col-12">
							<f:validateRegex pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,5}$" />
						</p:inputText>					
					</div>
					
					
					<div class="ui-grid-row">
						<p:outputLabel for="password" value="#{msg['msg.password']}" styleClass="ui-grid-col-6"/>
						<p:message for="password" display="text" styleClass="ui-grid-col-6"/>
					</div>
					
					<div class="ui-grid-row">
						<p:password id="password" value="#{registroAlumno.password}" required="true" requiredMessage="#{msg['error.required']}" 
									match="passwordMatch" placeholder="#{msg['placeholder.password']}" styleClass="ui-grid-col-12">									
							<f:validateLength minimum="6" maximum="16" />
							<pe:keyFilter mask="alphanum"/>
						</p:password>
					</div>


					<div class="ui-grid-row">
						<p:outputLabel for="passwordMatch" value="#{msg['msg.passwordMatch']}" styleClass="ui-grid-col-6"/>
						<p:message for="passwordMatch" display="text" styleClass="ui-grid-col-6"/>
					</div>
					
					<div class="ui-grid-row">					
						<p:password id="passwordMatch" value="#{registroAlumno.password}" required="true" requiredMessage="#{msg['error.required']}" 
									placeholder="#{msg['placeholder.password']}" styleClass="ui-grid-col-12">
							<pe:keyFilter mask="alphanum"/>							
						</p:password>									
					</div>


					<div class="ui-grid-row">
						<p:outputLabel for="nombre" value="#{msg['msg.nombre']}" styleClass="ui-grid-col-6"/>
						<p:message for="nombre" display="text" styleClass="ui-grid-col-6"/>
					</div>
					
					
					<div class="ui-grid-row">					
						<p:inputText id="nombre" value="#{registroAlumno.nombre}" required="true" requiredMessage="#{msg['error.required']}" validatorMessage="#{msg['error.formato']}" 
									 placeholder="#{msg['placeholder.name']}" styleClass="ui-grid-col-12">
							<f:validateLength maximum="30" />						
						</p:inputText>
					</div>


					<div class="ui-grid-row">
						<p:outputLabel for="apellidos"  value="#{msg['msg.apellidos']}" styleClass="ui-grid-col-6"/>
						<p:message for="apellidos" display="text" styleClass="ui-grid-col-6"/>
					</div>
					
					<div class="ui-grid-row">
						<p:inputText id="apellidos" value="#{registroAlumno.apellidos}" required="true" requiredMessage="#{msg['error.required']}" validatorMessage="#{msg['error.formato']}"
									 placeholder="#{msg['placeholder.apellidos']}" styleClass="ui-grid-col-12">
							<f:validateLength maximum="60" />															 
						</p:inputText>
					</div>
					
					
					<!-- botones -->					            			            		
					<div class="ui-grid-row pnlRegistroButtonPanel">
						<p:button id="btnBack" outcome="index.xhtml" value="#{msg['btn.cancel']}" styleClass="ui-grid-col-6" />
						<p:commandButton id="btnAceptar" value="#{msg['btn.ok']}" actionListener="#{registroAlumno.registro}" 
										 process="@form" update="@form" oncomplete="confirmacion(xhr, status, args)" 
										 styleClass="ui-grid-col-6" />
					</div>
											   			
  				</p:panel>
  							
			</div>
									
		</div>
								
	</div>
	
	</h:form>


	<p:dialog header="#{msg['btn.cancel']}" modal="true" draggable="false" resizable="false" closable="false" widgetVar="dlg_wv">		    	    
		<p:button value="#{msg['btn.continue']}" outcome="cv.xhtml" onclick="PF('dlg_wv').hide();" style="width:100%; margin-bottom: 10px;"/>
	</p:dialog>


    <script type="text/javascript">
        function confirmacion(xhr, status, args) {
            if (args.loginCorrecto) {
                PF('dlg_wv').show();
            }
        }
    </script>
		
</ui:composition>	

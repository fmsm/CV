<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
		
	<h:form id="contentForm">	
	
	<div class="ui-grid ui-grid-responsive">
	
	    <div class="ui-grid-row"> 
	    	    
	        <div class="ui-grid-col-12 txtCenter">					
				<p:graphicImage name="/imagenes/logo.png" styleClass="logoRegistro"/> 	        	
	        </div>
	    
	    </div>    
			
		<div class="ui-grid-row">
		        	        		        		
	        <div class="ui-grid-col-4" style="margin: auto;">
	        									        							
				<p:panel id="registroAluPnl" styleClass="pnlRegistro">
				
					<f:facet name="header">
						<h:outputText value="ALUMNO | Crear cuenta"/>
					</f:facet>
					
																				
					<div class="ui-grid-row">
 						<p:outputLabel for="email" value="Email" styleClass="ui-grid-col-6"/> 
						<p:message for="email" styleClass="ui-grid-col-6"/>					
					</div>
					
					<div class="ui-grid-row">					
						<p:inputText id="email" value="#{registroAlu.email}" required="true" requiredMessage="Campo Obligatorio" validatorMessage="Formato incorrecto" 
									 placeholder="antonio.sanchez@gmail.com" styleClass="ui-grid-col-12">
							<f:validateRegex pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,63}$" />
							<p:clientValidator event="keyup"/>
						</p:inputText>					
					</div>
					
					
					<div class="ui-grid-row">
						<p:outputLabel for="password" value="Contraseña" styleClass="ui-grid-col-6"/>
						<p:message for="password" styleClass="ui-grid-col-6"/>
					</div>
					
					<div class="ui-grid-row">
						<p:password id="password" value="#{registroAlu.password}" required="true" requiredMessage="Campo Obligatorio" validatorMessage="Formato incorrecto"  
									placeholder="contraseña" styleClass="ui-grid-col-12">
							<f:validateLength minimum="6" maximum="16" />
							<pe:keyFilter mask="alphanum"/>
							<p:clientValidator event="keyup"/>
						</p:password>
					</div>

					<!-- quitado por problemas al validar con Primefaces CSV -->
<!-- 					<div class="ui-grid-row"> -->
<!-- 						<p:outputLabel for="passwordMatch" value="Repetir contraseña" styleClass="ui-grid-col-6"/> -->
<!-- 						<p:message for="passwordMatch" styleClass="ui-grid-col-6"/> -->
<!-- 					</div> -->
					
<!-- 					<div class="ui-grid-row">					 -->
<!-- 						<p:password id="passwordMatch" value="#{registroAlu.password}"  -->
<!-- 									styleClass="ui-grid-col-12"> -->
<!-- 							<f:validateLength minimum="6" maximum="16" /> -->
<!-- 							<pe:keyFilter mask="alphanum"/>							 -->
<!-- 						</p:password>									 -->
<!-- 					</div> -->


					<div class="ui-grid-row">
						<p:outputLabel for="nombre" value="Nombre" styleClass="ui-grid-col-6"/>
						<p:message for="nombre" styleClass="ui-grid-col-6"/>
					</div>
					
					<div class="ui-grid-row">					
						<p:inputText id="nombre" value="#{registroAlu.nombre}" required="true" requiredMessage="Campo Obligatorio" validatorMessage="Formato incorrecto" 
									 placeholder="Antonio" styleClass="ui-grid-col-12">
							<f:validateLength minimum="2" maximum="16" />
							<p:clientValidator event="keyup"/>						
						</p:inputText>
					</div>


					<div class="ui-grid-row">
						<p:outputLabel for="apellidos" value="Apellido/s" styleClass="ui-grid-col-6"/>
						<p:message for="apellidos" styleClass="ui-grid-col-6"/>
					</div>
					
					<div class="ui-grid-row">
						<p:inputText id="apellidos" value="#{registroAlu.apellidos}" required="true" requiredMessage="Campo Obligatorio" placeholder="Sánchez Fernández" 
									 styleClass="ui-grid-col-12">
							<p:clientValidator event="keyup"/>															 
						</p:inputText>
					</div>


					<div class="ui-grid-row">
						<p:outputLabel for="tipoIdentificacion" value="Tipo Identificación" styleClass="ui-grid-col-6"/>
						<p:message for="tipoIdentificacion" styleClass="ui-grid-col-6"/>
					</div>
					
					<div class="ui-grid-row">										
            			<p:selectOneMenu id="tipoIdentificacion" value="#{registroAlu.tipoIdentificacion}" required="true" requiredMessage="Campo Obligatorio" 
            							 widgetVar="wvSelectTipo" onchange="tipoIdentificacion()"  styleClass="ui-grid-col-12">
            				<f:selectItem itemValue="" itemLabel="seleccionar una opción"/>
            				<f:selectItem itemValue="DNI/NIF" itemLabel="DNI/NIF"/>
            				<f:selectItem itemValue="NIE" itemLabel="NIE"/>
            				<f:selectItem itemValue="Pasaporte" itemLabel="Pasaporte"/>            				            			
            			</p:selectOneMenu>					
					</div>

					
					<!-- esta es la parte más problemática, validar dni o nif o nie o pasaporte, segun nos venga del campo anterior -->
					<!-- de momento solo valida el dni/nif: que tenga formato 8 numeros 1 letra; no si la letra es correcta segun los números-->
					<div class="ui-grid-row">
						<p:outputLabel id="labelIdentificacion" for="identificacion" value="Identificación" styleClass="ui-grid-col-6"/>										
						<p:message for="identificacion" styleClass="ui-grid-col-6"/>
					</div>
					
					<div class="ui-grid-row">
						<p:inputText id="identificacion" value="#{registroAlu.identificacion}" required="true" requiredMessage="Campo Obligatorio"
									 validatorMessage="Formato incorrecto" 
									 placeholder="93214561A" widgetVar="wvInputIdentificacion" styleClass="ui-grid-col-12">									 
							<f:validateRegex pattern="^[0-9]{8}[a-zA-Z]{1}$" />
							<p:clientValidator event="keyup"/>													
						</p:inputText>
					</div>


					<!-- botones -->					            			            		
					<div class="ui-grid-row pnlRegistroButtonPanel">
						<p:button id="btnBack" outcome="index.xhtml" value="Cancelar" styleClass="ui-grid-col-6" />
						<p:commandButton id="btnAceptar" value="Aceptar" action="#{registroAlu.mostrarResultados}" ajax="false" validateClient="true" 
										 styleClass="ui-grid-col-6" />
					</div>
											   			
  				</p:panel>
  							
			</div>
									
		</div>
								
	</div>
	
	</h:form>

<script>

	function tipoIdentificacion() {
		$('#contentForm\\:identificacion').val('');
		//var valor = PF('wvSelectTipo').getSelectedValue();
		if ( PF('wvSelectTipo').getSelectedValue() !== '') {
			//$('#contentForm\\:labelIdentificacion').text( valor );
			PF('wvInputIdentificacion').enable();
		} else {
			//$('#contentForm\\:labelIdentificacion').text( 'Identificación' );
			PF('wvInputIdentificacion').disable();		
		}
	}		
	
</script>
		
</ui:composition>	

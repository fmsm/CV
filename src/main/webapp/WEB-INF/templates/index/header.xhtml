<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions">

	<h:form id="headerForm">
	
	<!-- con ese for parece ser que solo deberia mostrar los mensajes que se le manden con '....addMessage("mensajeGrowl",...' -->
	<p:growl id="growl"/>
		
	<div class="ui-grid ui-grid-responsive">
	
		<!-- Barra superior (fecha) -->
		<div class="ui-grid-row">
								
    		<div class="ui-grid-col-12">
    			
				<p:panelGrid id="hdrSup" columns="2" layout="grid" styleClass="noBorder" 
							 columnClasses="bgColorDark txtLeft txtColorDark, bgColorDark txtRight txtColorDark primLetraUpperCase">

					<i class="fa fa-envelope"/> #{msg['datos.emailAlbarregas']} <i class="fa fa-phone"/> #{msg['datos.tlfnoAlbarregas']}
					
					<h:outputText value="#{of:formatDate(now, 'EEEE, dd MMMM yyyy')}"/> 																							
				
				</p:panelGrid>

    		</div>
    		
			    				
		</div>
	    
	    <!-- Logo y user/pass, botÃ³n login -->
	    <div class="ui-grid-row"> 
	    	    
	        <div class="ui-grid-col-6">
	        
				<p:panel id="hdrLogo" styleClass="bgColor pnlLogo noPadding noBorder">
					
					<p:graphicImage name="/imagenes/logo.png" style="height: 80px;"/> <!-- altura de la imagen del logo -->
					
			    </p:panel>    			        	        
	        	
	        </div>
	        
	        <div class="ui-grid-col-6 bgColor">

				<p:panel id="hdrLogin" styleClass="bgColor pnlLogin noPadding noBorder txtRight"> 

					<p:inputText id="user" value="#{inicio.username}" size="25" placeholder="#{msg['placeholder.email']}" required="true" requiredMessage="Campo Obligatorio"
								 disabled="#{not empty login}"/>
								 
					<p:password id="pass" value="#{inicio.password}" size="16" placeholder="#{msg['placeholder.password']}" required="true" requiredMessage="Campo Obligatorio"
								disabled="#{not empty login}"/>
								
					<p:commandButton id="loginBtn" value="#{msg['btn.login']}" actionListener="#{inicio.login}" 
									 process="@form" update="@form" oncomplete="confirmacion(xhr, status, args)" disabled="#{not empty login}"
									 styleClass="btnLogin noMarginRight"/>
					
			    </p:panel>
			        			        	        
	        </div>
	    
	    </div>
	    		
	</div>
		
	</h:form>
		
	<!-- PARECE QUE NO FUNCIONA BIEN, SOLO LO HACE SI YA HABIA SESION INICIADA -->
	<!-- en el attr header accedo al atributo de la sesion 'nombre' directamente mediante EL (http://stackoverflow.com/tags/el/info) -->
	<!-- header = "Bienvenido #{nombre}" -->
	<!-- PARECE QUE NO FUNCIONA BIEN TAMPOCO, usando un atributo del mb inicio, PROBAR EN CASA CON java 1.8 -->
	<!-- lo he vuelto a poner con un literal de momento -->
	<p:dialog header="#{msg['headerDlg.loginOK']}" modal="true" draggable="false" resizable="false" closable="false" widgetVar="dlg_wv">		    	    
		<p:button value="#{msg['btn.continue']}" outcome="panelAlumno.xhtml" onclick="PF('dlg_wv').hide();" style="width:100%; margin-bottom: 10px;"/>
	</p:dialog>


    <script type="text/javascript">
        function confirmacion(xhr, status, args) {
            if (args.loginCorrecto) {
                PF('dlg_wv').show();
            }
        }
    </script>
	
		
</ui:composition>	
